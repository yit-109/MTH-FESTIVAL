<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>カウント中</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>カウント中...</h1>
        <p>終了ボタンを押すと戻れません</p>
        <h3 style="color: red;"><strong>※指示があるまではボタンは押さず<br>入力してお待ちください。</strong></h3>
        
        <label for="nickname">ニックネーム:</label><br>
        <input type="text" class="text-box" id="nickname" name="nickname" placeholder="ニックネームを入力（必須）"  required><br class="line-break">

        <label for="name">名前:</label><br>
        <input type="text" class="text-box" id="name" name="name" placeholder="氏名を入力（必須）" required><br class="line-break">
        
        <label for="score">スコア:</label><br>
        <input type="number" class="text-box" id="score" name="score" placeholder="スコアを入力（必須）" required><br class="line-break"><br>
        
        <button class="button" onclick="submitData()">終了</button>
    </div>

    <script>
        function submitData() {
            var nickname = document.getElementById('nickname').value;
            var name = document.getElementById('name').value;
            var score = document.getElementById('score').value;
            
            if (!nickname.trim() || !name.trim() || !score.trim()) {
                alert('必要項目を入力してください。');
                return;
            }

            var confirmation = confirm('確認しましたか？');
            if (confirmation) {
                var data = {
                    nickname: nickname,
                    name: name,
                    score: score
                };

                fetch('https://script.google.com/macros/s/AKfycbz4dE1uUH5rmLdDO7EdO37M6v6UucaR70aefWAQDLuPEOWuxaCoOvUI-g5yFdRwi1-h/exec', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.text())
                .then(text => {
                    if (text === 'success') {
                        window.location.href = 'page3.html';
                    } else {
                        alert('送信に失敗しました。');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('送信に失敗しました。');
                });
            }
        }
    </script>
</body>
</html>
